/* Header block: hamburger toggle + responsive nav */
.header {
    background: var(--surface-elev);
    color: var(--text);
    box-shadow: var(--shadow-lg);
    position: relative;
    z-index: 2000;
    /* ensure header stacks above hero/content */

    /* stronger default for readability */
    background: var(--surface-elev);
    color: var(--text);

    &__inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
    }

    &__toggle {
        inline-size: 44px;
        block-size: 44px;
        border: 0;
        background: transparent;
        display: inline-flex;
        flex-direction: column;
        justify-content: center;
        gap: 6px;
        cursor: pointer;
        color: inherit;
        z-index: 3000;
        /* above dropdown */
    }

    &__toggle-bar {
        inline-size: 24px;
        block-size: 2px;
        background: currentColor;
    }

    /* Mobile: dropdown panel hidden until open */
    &__nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #ffffff;
        /* explicit light surface for dropdown */
        color: #111111;
        /* explicit dark text */
        box-shadow: var(--shadow-lg);
        padding: 1rem 1rem;
        /* increased padding for tap targets */
        border-radius: 0 0 12px 12px;
        border: 1px solid #e5e7eb;
        border-top: 0;

        opacity: 0;
        transform: translateY(-8px);
        pointer-events: none;
        transition: opacity 160ms ease, transform 200ms ease;
        z-index: 2500;
        /* above overlay */
        background-clip: padding-box;
    }

    &__menu {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        margin: 0;
        /* reset for safety */
        padding: 0;
        /* reset for safety */
        list-style: none;
        /* hide bullets */
    }

    &__link {
        display: block;
        padding: 0.875rem 0.75rem;
        color: var(--text);
        text-decoration: none;
        font-weight: 600;
    }
}

.header__logo {
    color: var(--text);
    text-decoration: none;
}

.header__link {
    color: var(--text);
    text-decoration: none;
}

/* Force readable link colors inside the dropdown */
.header__nav .header__link {
    color: #111111;
}

.header__nav .header__link:visited {
    color: #111111;
}

/* Subtle divider between dropdown items */
.header__menu>li+li {
    border-top: 1px solid #e5e7eb;
}

/* Hover/focus backgrounds for readability */
.header__link:hover {
    background: #f3f4f6;
}

.header__link:focus-visible {
    outline: 3px solid #2563eb;
    outline-offset: 3px;
}

@media (prefers-color-scheme: dark) {
    .header__link:hover {
        background: rgba(255, 255, 255, 0.08);
    }

    .header__menu>li+li {
        border-top-color: rgba(255, 255, 255, 0.12);
    }

    .header__nav {
        background: #161a22;
        color: #f3f4f6;
    }

    .header__nav .header__link,
    .header__nav .header__link:visited {
        color: #f3f4f6;
    }
}

/* Open state */
body.nav-open .header__nav {
    display: block;
    opacity: 1;
    transform: none;
    pointer-events: auto;
}

/* Prevent background scroll when menu is open */
body.nav-open {
    overflow: hidden;
}

/* Dim background when nav is open to increase contrast */
body.nav-open::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.35);
    z-index: 1500;
}

/* Desktop breakpoint: show horizontal nav, hide toggle */
@media (min-width: 768px) {
    .header {
        position: static;
    }

    .header__toggle {
        display: none;
    }

    .header__nav {
        position: static;
        background: transparent;
        box-shadow: none;
        padding: 0;
        border-radius: 0;
        display: block;
        opacity: 1;
        transform: none;
        pointer-events: auto;
        color: inherit;
        border: 0;
    }

    .header__menu {
        flex-direction: row;
        gap: 1rem;
    }

    .header__link {
        padding: 0.25rem 0.75rem;
    }
}

.header {
    overflow: visible;
}